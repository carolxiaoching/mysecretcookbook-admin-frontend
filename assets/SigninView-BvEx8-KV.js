import{_ as C}from"./logo-Egb9TNSC.js";import{u as M,l as N,m as B,r as p,a as r,o as h,c as v,b as e,d as t,w as y,F as E,s as R,e as i,t as L,f as T,n as _}from"./index-CX7ZakWi.js";import{a as U}from"./api-BodTUH2d.js";const j={class:"text-center text-xl-start"},z=e("img",{src:C,alt:"logo"},null,-1),A={class:"signin d-flex justify-content-center align-items-center flex-wrap"},D=e("h1",{class:"mb-11 text-center h3"},"管理員介面",-1),I=e("p",{class:"mb-15 text-center text-muted lh-lg"},[i(" 歡迎來到我的秘密食譜 "),e("span",{class:"d-block"}," 請輸入管理員帳號和密碼登入 ")],-1),G={key:0,class:"mb-11 py-11 alert alert-danger"},H=e("i",{class:"bi bi-exclamation-triangle-fill me-4"},null,-1),J={class:"mb-8"},K=e("label",{for:"email",class:"d-block mb-4"},[e("span",{class:"text-danger"},"*"),i(" 電子信箱： ")],-1),O={class:"mb-8"},P=e("label",{for:"password",class:"d-block mb-4"},[e("span",{class:"text-danger"},"*"),i(" 密碼： ")],-1),Q=e("p",{class:"mb-13 text-end"},[e("a",{href:"#",class:"text-decoration-underline"},"忘記密碼？")],-1),W={class:"text-center"},X=["disabled"],se={__name:"SigninView",setup(Y){const V=M(),w=N(),k=B(),{openLoading:F,closeLoading:g}=w,{pushMessage:d}=k,b=p(),c=p(""),a=p({email:"",password:""});async function S(){var m,s;F();try{const o=await U(a.value),{status:l,data:n}=o.data;l==="success"?(R(n.token),b.value.resetForm(),d({style:"success",title:"登入成功",text:"登入成功，將跳轉至管理頁面"}),V.push("/dashboard")):d({style:"danger",title:"登入失敗",text:"登入失敗，請重新登入"}),g()}catch(o){d({style:"danger",title:"登入失敗",text:"登入失敗請，重新登入"}),c.value=((s=(m=o.response)==null?void 0:m.data)==null?void 0:s.message)||"登入失敗，請重新登入",g()}}return(m,s)=>{const o=r("router-link"),l=r("VField"),n=r("ErrorMessage"),q=r("VForm");return h(),v(E,null,[e("nav",j,[t(o,{to:"/signin",class:"d-inline-block px-md-13 py-8"},{default:y(()=>[z]),_:1})]),e("section",A,[t(q,{class:"signinForm px-8 px-sm-16 px-md-18 py-17 py-sm-18 bg-white rounded-3 shadow",onSubmit:S,ref_key:"form",ref:b},{default:y(({errors:x,meta:f})=>[D,I,c.value?(h(),v("p",G,[H,i(" "+L(c.value),1)])):T("",!0),e("div",J,[K,t(l,{type:"email",name:"電子信箱",id:"email",class:_(["form-control",{"is-invalid":x.電子信箱}]),placeholder:"請輸入電子信箱",rules:"email|required",modelValue:a.value.email,"onUpdate:modelValue":s[0]||(s[0]=u=>a.value.email=u),required:""},null,8,["class","modelValue"]),t(n,{name:"電子信箱",class:"text-danger"})]),e("div",O,[P,t(l,{type:"password",name:"密碼",id:"password",class:_(["form-control",{"is-invalid":x.密碼}]),placeholder:"請輸入密碼",rules:"required",modelValue:a.value.password,"onUpdate:modelValue":s[1]||(s[1]=u=>a.value.password=u),required:""},null,8,["class","modelValue"]),t(n,{name:"密碼",class:"text-danger"})]),Q,e("div",W,[e("button",{type:"submit","aria-disabled":"true",class:_(["w-75 btn btn-primary",{disabled:!f.valid}]),disabled:!f.valid}," 立即登入 ",10,X)])]),_:1},512)])],64)}}};export{se as default};
